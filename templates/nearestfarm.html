<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
     <title>Nearest Farm</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
     <style>
        /* Custom styles */
        .container {
            max-width: 500px; /* Limits form width on larger screens */
        }
    </style>
</head>
<body class="bg-light">
         <div class="container mt-4">
    <img src="{{ url_for('static', filename='logo.png') }}" alt="Logo" style="width: 200px;">
     <header>
        <h2 >Nearest Farm</h2>
    </header>
    
    <label for="lat">Latitude:</label>
    <input type="text" id="lat" placeholder="Enter Latitude">
    
    <label for="lng">Longitude:</label>
    <input type="text" id="lng" placeholder="Enter Longitude">

    <button onclick="getLocation()">Use My Location</button>
    <button onclick="findHouses()">Find Nearest Houses</button>

    <h3>Results:</h3>
    <ul id="houseList"></ul>
    
    <script>
function findHouses() {
    const lat = document.getElementById("lat").value;
    const lng = document.getElementById("lng").value;

    if (!lat || !lng) {
        alert("Please enter or fetch your coordinates!");
        return;
    }

    // Replace with your Render API URL
    const apiUrl = "https://yieldcalculatorpilotproject-io.onrender.com/nearest-houses";

    fetch(`${apiUrl}?lat=${lat}&lng=${lng}`)
    .then(response => response.json())
    .then(data => {
        const list = document.getElementById("houseList");
        list.innerHTML = "";
        data.forEach(house => {
            const item = document.createElement("li");
            item.textContent = `${house.name} - Distance: ${house.distance.toFixed(2)} km`;
            list.appendChild(item);
        });
    })  .catch(error => console.error("Error fetching houses:", error));
}
    </script>
         </div>
</body>
</html>
